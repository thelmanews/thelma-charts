<!-- <link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="thelma_core.html">
<link rel="import" href="thelma_charts.html"> -->

<polymer-element name="th-line-graph" extends="th-d3-chart">
  <template>
    <style>
      :host {
        font-size: 0.875em;
      }
      path {
        stroke: steelblue;
        stroke-width: 2;
        fill: none;
      }
       
      line {
        stroke: black;
      }

    </style>
    <content></content>
    <svg id="chart"></svg> 
  </template> 
  
  <script>
    Polymer('th-line-graph', {
      chartData: [3, 6, 2, 7, 5, 2, 1, 3, 8, 10, 2, 5, 7],
    init: function() {

      var chart_svg = this.$.chart;
      var svg = d3.select(chart_svg);
      
      var data = this.chartData,
          w = this.chartWidth,
          h = this.chartHeight,
          margin = 20,
          y = d3.scale.linear().domain([0, d3.max(data)]).range([0 + margin, h - margin]),
          x = d3.scale.linear().domain([0, data.length]).range([0 + margin, w - margin]);

      // container
      var vis = svg.append("svg")
        .attr("width", w)
        .attr("height", h);


      var g = vis.append("g")
        .attr("transform", "translate(0,"+ h +")");

      var line = d3.svg.line()
        .x(function(d,i) { return x(i); })
        .y(function(d) { return -1 * y(d); });
      
      // the line itself
      g.append("path").attr("d", line(data));
  
      // x-axis
      g.append("line")
        .attr("x1", x(0))
        .attr("y1", -1 * y(0))
        .attr("x2", x(data.length))
        .attr("y2", -1 * y(0));
      
      // y-axis
      g.append("line")
        .attr("x1", x(0))
        .attr("y1", -1 * y(0))
        .attr("x2", x(0))
        .attr("y2", -1 * y(d3.max(data)));

      // x labels
      g.selectAll(".xLabel")
        .data(x.ticks(5))
        .enter().append("text")
        .attr("class", "xLabel")
        .text(String)
        .attr("x", function(d) { return x(d) })
        .attr("y", 0)
        .attr("text-anchor", "middle");
      
      // y labels
      g.selectAll(".yLabel")
        .data(y.ticks(4))
        .enter().append("text")
        .attr("class", "yLabel")
        .text(String)
        .attr("x", 0)
        .attr("y", function(d) { return -1 * y(d) })
        .attr("text-anchor", "right")
        .attr("dy", 4);
      
      // x tick marks
      g.selectAll(".xTicks")
        .data(x.ticks(5))
        .enter().append("line")
        .attr("class", "xTicks")
        .attr("x1", function(d) { return x(d); })
        .attr("y1", -1 * y(0))
        .attr("x2", function(d) { return x(d); })
        .attr("y2", -1 * y(-0.3));
      
      // y tick marks
      g.selectAll(".yTicks")
        .data(y.ticks(4))
        .enter().append("line")
        .attr("class", "yTicks")
        .attr("y1", function(d) { return -1 * y(d); })
        .attr("x1", x(-0.3))
        .attr("y2", function(d) { return -1 * y(d); })
        .attr("x2", x(0));


  },
  reset: function() {

      
  },
  
  animate: function() {

  }
    });
  </script>

</polymer-element>
