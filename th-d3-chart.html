<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="thelma_core.html">
      

<polymer-element name="th-d3-chart" extends="th-animated" attributes="chartData chartWidth chartHeight">
  <template>
    <style>

      :host {
        display: inline-block;
        position: relative;
      }
      #chart {

      }
      #chart text {
        font-size: 14px;
      }
    </style>

      <svg id="chart">
      </svg>
    
  </template>
  <script src="../bower_components/d3/d3.min.js"></script> 
  <script>

      Polymer('th-d3-chart', {
         chartData: [{label: 'medicaid', value: 20, display_value: '$20'},{label: 'gap', value: 40, display_value: '$40'},{label: 'sub', value: 10, display_value: '$10'}],  // default data just for demo 
         chartWidth: 200,
         chartHeight: 300,
         extractElementDataPoints : function() {
              var barInfos = this.querySelectorAll('th-data-point');
              var dataFromElements = [];
              [].forEach.call(barInfos, function(dataPointEl) {
                  var dataPoint = {};
                  [].forEach.call(dataPointEl.attributes, function(attr) {
                    console.log(attr);
                    dataPoint[attr.name] = attr.value;
                  });
                  console.log(dataPoint);
                  dataFromElements.push(dataPoint);
              });

              
            if(this.validateElementDataPoints(dataFromElements)) {
              this.chartData= dataFromElements;
            }


          },
          validateElementDataPoints : function(data) {
             
              if(data.length<1) {
                return false;
              }
              return true;
          }
      });

  </script>

</polymer-element>

















