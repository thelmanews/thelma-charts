<link rel="import" href="../polymer/polymer.html">

<!--      
  multiple inheritance is not supported by polymer so moving this function to th-d3-chart
<polymer-element name="th-has-datapoint" attributes="">
  <script>
      Polymer('th-has-datapoint', { 

       extractElementDataPoints : function() {
            var barInfos = this.querySelectorAll('th-data-point');
            var dataFromElements = [];
            [].forEach.call(barInfos, function(dataPointEl) {
                var dataPoint = {};
                [].forEach.call(dataPointEl.attributes, function(attr) {
                  console.log(attr);
                  dataPoint[attr.name] = attr.value;
                });
                console.log(dataPoint);
                dataFromElements.push(dataPoint);
            });

            return dataFromElements;

        }

      });
  </script>
</polymer-element>
-->

<polymer-element name="th-animated" attributes="animateOnInit animateAfter completed animate reset color" resetable="true" animatable="true">
  
  <script>
      Polymer('th-animated', {  
        animationDelay: 1000,
        animateAfter: 0,
        animateOnInit: false,  //should be false actually. true for demo
        initialized: false,
        domReady: function() {
            this.init();

            if(this.animateOnInit || this.animateAfter>0) {
                if(this.animateAfter>0) {
                  var self = this;
                  setTimeout(function() {
                    self.animate();
                  },self.animateAfter);
                }
                else {
                  this.animate();
                }
            }

            this.initialized = true;

            //TODO should it be triggered by a callback in the end of init() ?
            this.fire('th-ready', {msg: 'element ready', element: this});


        },
        init: function() {
        },
        reset: function() {
        },
        animate: function() {
        },
        completed: function() {

        }

      });
  </script>

</polymer-element>

<polymer-element name="th-data-point" attributes="label value color displayValue image">
</polymer-element>
