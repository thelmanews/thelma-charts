<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="thelma_core.html">
<link rel="import" href="../core-ajax/core-ajax.html">

<polymer-element name="th-link" attributes="width linkUrl" noscript>
  <template>
      <core-style ref="theme"></core-style>
        
      <core-ajax
        auto
        url="http://www.corsproxy.com/online.wsj.com/articles/israel-shoots-down-palestinian-drone-1405336514"
        handleAs="text"  
        on-core-response="{{handleResponse}}">
      </core-ajax>
      <!-- handleAs="document" -->
  </template>

  <script>
      Polymer('th-link', {
        ready: function(){
          // add corsproxy to url using regex
        },
        handleResponse: function(event, response) {
            var parser=new DOMParser();
            var xmlDoc=parser.parseFromString(response,"text/xml");
            var head = response.response.head;
            // console.log(response.response.head);
            console.log(response.response);
            var titlePattern = /"twitter:title"\s*content=\s*"(.*)"/;
            console.log(titlePattern.test(response.response));

        }


      });

  </script>
</polymer-element>

